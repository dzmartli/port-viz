<?xml version="1.0" encoding="UTF-8" standalone="no"?><svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1992px" preserveAspectRatio="none" style="width:660px;height:1992px;background:#FFFFFF;" version="1.1" viewBox="0 0 660 1992" width="660px" zoomAndPan="magnify"><defs/><g><rect fill="none" height="27.6094" id="_title" style="stroke:none;stroke-width:1.0;" width="198" x="232.25" y="10"/><text fill="#000000" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="188" x="237.25" y="29.5332">Port-viz sequence diagram</text><rect fill="none" height="1845.7578" style="stroke:#000000;stroke-width:1.5;" width="643.5" x="10" y="93.2188"/><rect fill="none" height="1763.2188" style="stroke:#000000;stroke-width:1.5;" width="623.5" x="20" y="118.5703"/><rect fill="none" height="1262.6797" style="stroke:#000000;stroke-width:1.5;" width="603.5" x="30" y="174.2734"/><rect fill="none" height="830.3281" style="stroke:#000000;stroke-width:1.5;" width="583.5" x="40" y="364.4375"/><rect fill="none" height="400.3281" style="stroke:#000000;stroke-width:1.5;" width="563.5" x="50" y="521.8984"/><rect fill="#FFC0CB" height="166.8125" style="stroke:#000000;stroke-width:1.5;" width="543.5" x="60" y="748.4141"/><rect fill="#FFC0CB" height="133.9453" style="stroke:none;stroke-width:1.0;" width="583.5" x="40" y="929.2266"/><rect fill="#FFC0CB" height="131.5938" style="stroke:none;stroke-width:1.0;" width="583.5" x="40" y="1063.1719"/><rect fill="#FFC0CB" height="133.9453" style="stroke:none;stroke-width:1.0;" width="603.5" x="30" y="1201.7656"/><rect fill="#FFC0CB" height="101.2422" style="stroke:none;stroke-width:1.0;" width="603.5" x="30" y="1335.7109"/><rect fill="#FFC0CB" height="168.2969" style="stroke:none;stroke-width:1.0;" width="623.5" x="20" y="1443.9531"/><rect fill="#FFC0CB" height="168.2969" style="stroke:none;stroke-width:1.0;" width="623.5" x="20" y="1612.25"/><rect fill="#FFC0CB" height="101.2422" style="stroke:none;stroke-width:1.0;" width="623.5" x="20" y="1780.5469"/><rect fill="#FFC0CB" height="50.1875" style="stroke:none;stroke-width:1.0;" width="643.5" x="10" y="1888.7891"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="304" x2="304" y1="76.2188" y2="1955.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="417" x2="417" y1="76.2188" y2="1955.9766"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="538.5" x2="538.5" y1="76.2188" y2="1955.9766"/><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="50" x="279" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="286" y="65.1426">Client</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="50" x="279" y="1954.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36" x="286" y="1976.5098">Client</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="389" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="396" y="65.1426">Server</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="56" x="389" y="1954.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42" x="396" y="1976.5098">Server</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="484.5" y="43.6094"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="491.5" y="65.1426">Network device</text><rect fill="#E2E2F0" height="31.6094" rx="2.5" ry="2.5" style="stroke:#181818;stroke-width:0.5;" width="109" x="484.5" y="1954.9766"/><text fill="#000000" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="95" x="491.5" y="1976.5098">Network device</text><path d="M10,93.2188 L71,93.2188 L71,101.5703 L61,111.5703 L10,111.5703 L10,93.2188 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1845.7578" style="stroke:#000000;stroke-width:1.5;" width="643.5" x="10" y="93.2188"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="25" y="107.7139">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="92" x="86" y="106.6377">[Form validation]</text><path d="M20,118.5703 L81,118.5703 L81,126.9219 L71,136.9219 L20,136.9219 L20,118.5703 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1763.2188" style="stroke:#000000;stroke-width:1.5;" width="623.5" x="20" y="118.5703"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="35" y="133.0654">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="99" x="96" y="131.9893">[Form data check]</text><polygon fill="#0000FF" points="405,155.2734,415,159.2734,405,163.2734,409,159.2734" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="304" x2="411" y1="159.2734" y2="159.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="311" y="154.417">WS connection</text><path d="M30,174.2734 L91,174.2734 L91,182.625 L81,192.625 L30,192.625 L30,174.2734 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1262.6797" style="stroke:#000000;stroke-width:1.5;" width="603.5" x="30" y="174.2734"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="45" y="188.7686">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="108" x="106" y="187.6924">[Device connection]</text><polygon fill="#0000FF" points="527,210.9766,537,214.9766,527,218.9766,531,214.9766" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="417" x2="533" y1="214.9766" y2="214.9766"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="424" y="210.1201">SSH connection</text><polygon fill="#0000FF" points="315,293.3828,305,297.3828,315,301.3828,311,297.3828" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="309" x2="416" y1="297.3828" y2="297.3828"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="321" y="292.5264">WS response</text><path d="M61,227.9766 L61,351.9766 L299,351.9766 L299,237.9766 L289,227.9766 L61,227.9766 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><path d="M289,227.9766 L289,237.9766 L299,237.9766 L289,227.9766 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="67" y="246.4717">WS data (Server &gt; Client):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="83" y="262.8232">status: "connecting"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="116" x="83" y="279.1748">model: "not defined"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="67" y="295.5264">Indiction status:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="83" y="311.8779">DISCONNECTED &gt; CONNECTING</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="67" y="328.2295">form submit button:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="83" y="344.5811">CONNECT &gt; DETACH</text><path d="M40,364.4375 L101,364.4375 L101,372.7891 L91,382.7891 L40,382.7891 L40,364.4375 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="830.3281" style="stroke:#000000;stroke-width:1.5;" width="583.5" x="40" y="364.4375"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="16" x="55" y="378.9326">alt</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="89" x="116" y="377.8564">[Get model info]</text><polygon fill="#0000FF" points="428,401.1406,418,405.1406,428,409.1406,424,405.1406" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="422" x2="538" y1="405.1406" y2="405.1406"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98" x="434" y="400.2842">SSH (model info)</text><polygon fill="#0000FF" points="315,467.1953,305,471.1953,315,475.1953,311,471.1953" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="309" x2="416" y1="471.1953" y2="471.1953"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="321" y="466.3389">WS response</text><path d="M126,418.1406 L126,509.1406 L299,509.1406 L299,428.1406 L289,418.1406 L126,418.1406 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><path d="M289,418.1406 L289,428.1406 L299,428.1406 L289,418.1406 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="132" y="436.6357">WS data (Server &gt; Client):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117" x="148" y="452.9873">status: "connecting"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="148" y="469.3389">model: device model</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="132" y="485.6904">Indiction status:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="84" x="148" y="502.042">CONNECTING</text><path d="M50,521.8984 L123,521.8984 L123,530.25 L113,540.25 L50,540.25 L50,521.8984 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="400.3281" style="stroke:#000000;stroke-width:1.5;" width="563.5" x="50" y="521.8984"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28" x="65" y="536.3936">loop</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="86" x="138" y="535.3174">[Get ports data]</text><polygon fill="#0000FF" points="428,558.6016,418,562.6016,428,566.6016,424,562.6016" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="422" x2="538" y1="562.6016" y2="562.6016"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="97" x="434" y="557.7451">SSH (ports data)</text><polygon fill="#0000FF" points="315,632.832,305,636.832,315,640.832,311,636.832" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="309" x2="416" y1="636.832" y2="636.832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79" x="321" y="631.9756">WS response</text><path d="M87,575.6016 L87,683.6016 L299,683.6016 L299,585.6016 L289,575.6016 L87,575.6016 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><path d="M289,575.6016 L289,585.6016 L299,585.6016 L289,575.6016 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="93" y="594.0967">WS data (Server &gt; Client):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114" x="109" y="610.4482">status: "connected"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="118" x="109" y="626.7998">model: device model</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95" x="109" y="643.1514">ports: ports data</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="93" y="659.5029">Indiction status:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175" x="109" y="675.8545">CONNECTING &gt; device model</text><polygon fill="#0000FF" points="405,718.2383,415,722.2383,405,726.2383,409,722.2383" style="stroke:#0000FF;stroke-width:1.0;"/><line style="stroke:#0000FF;stroke-width:1.0;" x1="304" x2="411" y1="722.2383" y2="722.2383"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="54" x="311" y="717.3818">WS send</text><path d="M126,693.7109 L126,735.7109 L299,735.7109 L299,703.7109 L289,693.7109 L126,693.7109 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><path d="M289,693.7109 L289,703.7109 L299,703.7109 L289,693.7109 " fill="#ADD8E6" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="132" y="712.2061">WS data (Client &gt; Server):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="74" x="148" y="728.5576">detach: false</text><path d="M60,748.4141 L141,748.4141 L141,756.7656 L131,766.7656 L60,766.7656 L60,748.4141 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="166.8125" style="stroke:#000000;stroke-width:1.5;" width="543.5" x="60" y="748.4141"/><text fill="#000000" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="36" x="75" y="762.9092">break</text><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="196" x="156" y="761.833">['detach: true' received from Client]</text><polygon fill="#FF0000" points="527,785.1172,537,789.1172,527,793.1172,531,789.1172" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="417" x2="533" y1="789.1172" y2="789.1172"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="424" y="784.2607">SSH disconnect</text><polygon fill="#FF0000" points="315,859.3477,305,863.3477,315,867.3477,311,863.3477" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="309" x2="416" y1="863.3477" y2="863.3477"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="321" y="858.4912">WS close</text><path d="M70,802.1172 L70,910.1172 L299,910.1172 L299,812.1172 L289,802.1172 L70,802.1172 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M289,802.1172 L289,812.1172 L299,812.1172 L289,802.1172 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="76" y="820.6123">WS data (Client &gt; Server):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="69" x="92" y="836.9639">detach: true</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="76" y="853.3154">Indiction status:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="92" y="869.667">device model &gt; DISCONNECTED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="76" y="886.0186">form submit button:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="92" y="902.3701">DETACH &gt; CONNECT</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="40" x2="623.5" y1="930.2266" y2="930.2266"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="183" x="45" y="941.6455">[Netmiko exception (disconnect)]</text><polygon fill="#FF0000" points="315,1007.293,305,1011.293,315,1015.293,311,1011.293" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="309" x2="416" y1="1011.293" y2="1011.293"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="321" y="1006.4365">WS close</text><path d="M70,950.0625 L70,1058.0625 L299,1058.0625 L299,960.0625 L289,950.0625 L70,950.0625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M289,950.0625 L289,960.0625 L299,960.0625 L289,950.0625 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="76" y="968.5576">WS data (Server &gt; Client):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="92" y="984.9092">status: "disconnected"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="76" y="1001.2607">Indiction status:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="92" y="1017.6123">device model &gt; DISCONNECTED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="76" y="1033.9639">form submit button:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="92" y="1050.3154">DETACH &gt; CONNECT</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="40" x2="623.5" y1="1064.1719" y2="1064.1719"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="199" x="45" y="1075.5908">[Websocket exception (disconnect)]</text><polygon fill="#FF0000" points="315,1124.8867,305,1128.8867,315,1132.8867,311,1128.8867" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="405,1124.8867,415,1128.8867,405,1132.8867,409,1128.8867" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="309" x2="411" y1="1128.8867" y2="1128.8867"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="321" y="1124.0303">WS disconnect</text><path d="M70,1084.0078 L70,1159.0078 L299,1159.0078 L299,1094.0078 L289,1084.0078 L70,1084.0078 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M289,1084.0078 L289,1094.0078 L299,1094.0078 L289,1084.0078 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="76" y="1102.5029">Indiction status:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="92" y="1118.8545">device model &gt; DISCONNECTED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="76" y="1135.2061">form submit button:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="92" y="1151.5576">DETACH &gt; CONNECT</text><polygon fill="#FF0000" points="527,1182.7656,537,1186.7656,527,1190.7656,531,1186.7656" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="417" x2="533" y1="1186.7656" y2="1186.7656"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="94" x="424" y="1181.9092">SSH disconnect</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="30" x2="633.5" y1="1202.7656" y2="1202.7656"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="297" x="35" y="1214.1846">[Netmiko exception (auth fail, timeout exception, etc.)]</text><polygon fill="#FF0000" points="315,1279.832,305,1283.832,315,1287.832,311,1283.832" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="309" x2="416" y1="1283.832" y2="1283.832"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="321" y="1278.9756">WS close</text><path d="M61,1222.6016 L61,1330.6016 L299,1330.6016 L299,1232.6016 L289,1222.6016 L61,1222.6016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M289,1222.6016 L289,1232.6016 L299,1232.6016 L289,1222.6016 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="67" y="1241.0967">WS data (Server &gt; Client):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="83" y="1257.4482">status: "disconnected"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="67" y="1273.7998">Indiction status:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="83" y="1290.1514">CONNECTING &gt; DISCONNECTED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="67" y="1306.5029">form submit button:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="83" y="1322.8545">DETACH &gt; CONNECT</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="30" x2="633.5" y1="1336.7109" y2="1336.7109"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="199" x="35" y="1348.1299">[Websocket exception (disconnect)]</text><polygon fill="#FF0000" points="315,1397.4258,305,1401.4258,315,1405.4258,311,1401.4258" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="405,1397.4258,415,1401.4258,405,1405.4258,409,1401.4258" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="309" x2="411" y1="1401.4258" y2="1401.4258"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="321" y="1396.5693">WS disconnect</text><path d="M70,1356.5469 L70,1431.5469 L299,1431.5469 L299,1366.5469 L289,1356.5469 L70,1356.5469 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M289,1356.5469 L289,1366.5469 L299,1366.5469 L289,1356.5469 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="76" y="1375.042">Indiction status:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="192" x="92" y="1391.3936">device model &gt; DISCONNECTED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="76" y="1407.7451">form submit button:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="92" y="1424.0967">DETACH &gt; CONNECT</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="643.5" y1="1444.9531" y2="1444.9531"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="122" x="25" y="1456.3721">[Unknown IP address]</text><polygon fill="#FF0000" points="315,1522.0195,305,1526.0195,315,1530.0195,311,1526.0195" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="309" x2="416" y1="1526.0195" y2="1526.0195"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="321" y="1521.1631">WS close</text><path d="M61,1464.7891 L61,1572.7891 L299,1572.7891 L299,1474.7891 L289,1464.7891 L61,1464.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M289,1464.7891 L289,1474.7891 L299,1474.7891 L289,1464.7891 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="67" y="1483.2842">WS data (Server &gt; Client):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="83" y="1499.6357">status: "disconnected"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="67" y="1515.9873">Indiction status:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="83" y="1532.3389">CONNECTING &gt; DISCONNECTED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="67" y="1548.6904">form submit button:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="83" y="1565.042">DETACH &gt; CONNECT</text><polygon fill="#FEFFDD" points="231,1582.8984,376,1582.8984,386,1594.8984,376,1606.8984,231,1606.8984,221,1594.8984,231,1582.8984" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141" x="233" y="1600.3936">Alarm "Unknown device"</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="643.5" y1="1613.25" y2="1613.25"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="137" x="25" y="1624.6689">[Unknown device model]</text><polygon fill="#FF0000" points="315,1690.3164,305,1694.3164,315,1698.3164,311,1694.3164" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="309" x2="416" y1="1694.3164" y2="1694.3164"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57" x="321" y="1689.46">WS close</text><path d="M61,1633.0859 L61,1741.0859 L299,1741.0859 L299,1643.0859 L289,1633.0859 L61,1633.0859 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M289,1633.0859 L289,1643.0859 L299,1643.0859 L289,1633.0859 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152" x="67" y="1651.5811">WS data (Server &gt; Client):</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131" x="83" y="1667.9326">status: "disconnected"</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="67" y="1684.2842">Indiction status:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="83" y="1700.6357">CONNECTING &gt; DISCONNECTED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="67" y="1716.9873">form submit button:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="83" y="1733.3389">DETACH &gt; CONNECT</text><polygon fill="#FEFFDD" points="232,1751.1953,376,1751.1953,386,1763.1953,376,1775.1953,232,1775.1953,222,1763.1953,232,1751.1953" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140" x="234" y="1768.6904">Alarm "Unknown model"</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="643.5" y1="1781.5469" y2="1781.5469"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="199" x="25" y="1792.9658">[Websocket exception (disconnect)]</text><polygon fill="#FF0000" points="315,1842.2617,305,1846.2617,315,1850.2617,311,1846.2617" style="stroke:#FF0000;stroke-width:1.0;"/><polygon fill="#FF0000" points="405,1842.2617,415,1846.2617,405,1850.2617,409,1846.2617" style="stroke:#FF0000;stroke-width:1.0;"/><line style="stroke:#FF0000;stroke-width:1.0;" x1="309" x2="411" y1="1846.2617" y2="1846.2617"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="89" x="321" y="1841.4053">WS disconnect</text><path d="M61,1801.3828 L61,1876.3828 L299,1876.3828 L299,1811.3828 L289,1801.3828 L61,1801.3828 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M289,1801.3828 L289,1811.3828 L299,1811.3828 L289,1801.3828 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="92" x="67" y="1819.8779">Indiction status:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="201" x="83" y="1836.2295">CONNECTING &gt; DISCONNECTED</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="112" x="67" y="1852.5811">form submit button:</text><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130" x="83" y="1868.9326">DETACH &gt; CONNECT</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="10" x2="653.5" y1="1889.7891" y2="1889.7891"/><text fill="#000000" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="86" x="15" y="1901.208">[Form not valid]</text><polygon fill="#FEFFDD" points="258,1909.625,349,1909.625,359,1921.625,349,1933.625,258,1933.625,248,1921.625,258,1909.625" style="stroke:#181818;stroke-width:0.5;"/><text fill="#000000" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="87" x="260" y="1927.1201">Validation error</text><!--MD5=[e05590e3b010d2c930b3821bfae7dd3f]
@startuml
title Port-viz sequence diagram
participant "Client" as Foo1
participant "Server" as Foo2
participant "Network device" as Foo3
alt Form validation
    alt Form data check
        Foo1 [#blue]- -> Foo2 : WS connection
        alt Device connection
            Foo2 [#blue]- -> Foo3 : SSH connection
            Foo1 <-[#blue] Foo2 : WS response
            note left #LightBlue
                WS data (Server > Client):
                    status: "connecting"
                    model: "not defined"
                Indiction status:
                    DISCONNECTED > CONNECTING
                form submit button:
                    CONNECT > DETACH
            end note
            alt Get model info
                Foo2 <-[#blue] Foo3 : SSH (model info)
                Foo1 <-[#blue] Foo2 : WS response
                note left #LightBlue
                    WS data (Server > Client):
                        status: "connecting"
                        model: device model
                    Indiction status:
                        CONNECTING
                end note
                loop Get ports data
                    Foo2 <-[#blue] Foo3 : SSH (ports data)
                    Foo1 <-[#blue] Foo2 : WS response
                    note left #LightBlue
                        WS data (Server > Client):
                            status: "connected"
                            model: device model
                            ports: ports data
                        Indiction status:
                            CONNECTING > device model
                    end note
                    Foo1 [#blue]-> Foo2 : WS send
                    note left #LightBlue
                        WS data (Client > Server):
                            detach: false
                    end note
                    break #Pink 'detach: true' received from Client
                        Foo2 [#red]-> Foo3 : SSH disconnect
                        Foo1 <-[#red] Foo2 : WS close
                        note left
                            WS data (Client > Server):
                                detach: true
                            Indiction status:
                                device model > DISCONNECTED
                            form submit button:
                                DETACH > CONNECT
                        end note
                    end
                end
            else #Pink Netmiko exception (disconnect)
                Foo1 <-[#red] Foo2 : WS close
                note left
                    WS data (Server > Client):
                        status: "disconnected"
                    Indiction status:
                        device model > DISCONNECTED
                    form submit button:
                        DETACH > CONNECT
                end note
            else #Pink Websocket exception (disconnect)
                Foo1 <-[#red]> Foo2 : WS disconnect
                note left
                    Indiction status:
                        device model > DISCONNECTED
                    form submit button:
                        DETACH > CONNECT
                end note
                Foo2 [#red]-> Foo3 : SSH disconnect
            end
        else #Pink Netmiko exception (auth fail, timeout exception, etc.)
            Foo1 <-[#red] Foo2 : WS close
            note left
                WS data (Server > Client):
                    status: "disconnected"
                Indiction status:
                    CONNECTING > DISCONNECTED
                form submit button:
                    DETACH > CONNECT
            end note
        else #Pink Websocket exception (disconnect)
            Foo1 <-[#red]> Foo2 : WS disconnect
            note left
                Indiction status:
                    device model > DISCONNECTED
                form submit button:
                    DETACH > CONNECT
            end note
        end
    else #Pink Unknown IP address
        Foo1 <-[#red] Foo2 : WS close
        note left
            WS data (Server > Client):
                status: "disconnected"
            Indiction status:
                CONNECTING > DISCONNECTED
            form submit button:
                DETACH > CONNECT
        end note
        hnote over Foo1 : Alarm "Unknown device"
    else #Pink Unknown device model
        Foo1 <-[#red] Foo2 : WS close
        note left
            WS data (Server > Client):
                status: "disconnected"
            Indiction status:
                CONNECTING > DISCONNECTED
            form submit button:
                DETACH > CONNECT
        end note
        hnote over Foo1 : Alarm "Unknown model"
    else #Pink Websocket exception (disconnect)
        Foo1 <-[#red]> Foo2 : WS disconnect
        note left
            Indiction status:
                CONNECTING > DISCONNECTED
            form submit button:
                DETACH > CONNECT
        end note
    end
else #Pink Form not valid
    hnote over Foo1 : Validation error
end
@enduml

PlantUML version 1.2022.7(Mon Aug 22 21:01:30 GET 2022)
(GPL source distribution)
Java Runtime: Java(TM) SE Runtime Environment
JVM: Java HotSpot(TM) 64-Bit Server VM
Default Encoding: Cp1251
Language: ru
Country: RU
--></g></svg>